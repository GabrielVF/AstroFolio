<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/input-styles.css">
    <title>Portfolio Setup</title>
</head>
<body>
    <div class="container">
        <h1>Portfolio Setup</h1>
        <div id="token-input-list"></div>
        <p>
            Currency:
            <select id="currency" onchange="saveCurrency(); fetchPrices();">
                <option value="usd">USD</option>
                <option value="eur">EUR</option>
                <option value="btc">BTC</option>
            </select>
        </p>
        <a href="index.html">Go to Main Page</a>
    </div>
    <script src="js/tokens.js"></script>
    <script src="js/scripts.js"></script>
    <script>
    
function renderTokens() {
    const categories = ["Project Tokens", "Liquid Staking", "Stablecoins", "Bridget Tokens"];
    const tokenInputList = document.getElementById("token-input-list");

    categories.forEach(category => {
        const tokenCategory = document.createElement("div");
        tokenCategory.className = "token-category";

        const tokenCategoryTitle = document.createElement("h2");
        tokenCategoryTitle.innerText = category;
        tokenCategoryTitle.className = "token-category-title";
        tokenCategory.appendChild(tokenCategoryTitle);

        const tokenList = document.createElement("div");
        tokenList.className = "token-list";

        tokens
            .filter(token => token.category === category)
            .forEach(token => {
                const tokenInputElement = document.createElement("p");
                tokenInputElement.innerHTML = `
                    <label for="${token.name}Tokens">${token.tag}:</label>
                    <input type="number" id="${token.name}Tokens" min="0">
                    <span class="unit-price" id="${token.name}Price"></span>
                `;
                tokenList.appendChild(tokenInputElement);

                const tokenInput = tokenInputElement.querySelector(`input[id="${token.name}Tokens"]`);
                tokenInput.addEventListener("input", () => {
                    saveToken(token.name);
                    calculateValue();
                });
            });

        tokenCategory.appendChild(tokenList);
        tokenInputList.appendChild(tokenCategory);
    });
}

        window.addEventListener("load", () => {
            renderTokens();
            loadAllTokens();
            loadCurrency();
            fetchPrices();
        });
    </script>
</body>
</html>
